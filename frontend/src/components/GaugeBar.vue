<template>
  <section id="gaugeBar">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 105" fill="none">
      <defs>
        <linearGradient id="latte" gradientTransform="rotate(90)">
          <stop offset="10%" stop-color="#EA090C" />
          <stop offset="90%" stop-color="#FFDAE9" />
        </linearGradient>
        <radialGradient id="strawberry1" cx="0.5" cy="0.5" r="0.5">
          <stop offset="80%" stop-color="#FFDAE9"/>
          <stop offset="100%" stop-color="#EA090C"/>
        </radialGradient>
      </defs>
      <mask id="path-1-inside-1" fill="white">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M64.6428 32.3217C64.878 31.565 65 30.7896 65 30C65 21.7157 51.5685 15 35 15C18.4315 15 5 21.7157 5 30C5 30.7897 5.12204 31.5651 5.35719 32.3217L15 95C15 100.523 23.9543 105 35 105C46.0457 105 55 100.523 55 95L64.6428 32.3217Z"/>
      </mask>
      <path d="M64.6428 32.3217L63.6879 32.0249L63.6658 32.096L63.6545 32.1696L64.6428 32.3217ZM5.35719 32.3217L6.34556 32.1697L6.33424 32.0961L6.31214 32.025L5.35719 32.3217ZM15 95H16V94.9235L15.9884 94.8479L15 95ZM55 95L54.0116 94.8479L54 94.9235V95H55ZM64 30C64 30.6852 63.8943 31.3606 63.6879 32.0249L65.5978 32.6184C65.8616 31.7694 66 30.8941 66 30H64ZM35 16C43.1627 16 50.5032 17.6564 55.766 20.2878C61.0886 22.9491 64 26.4407 64 30H66C66 25.275 62.1957 21.2666 56.6604 18.499C51.0654 15.7014 43.4059 14 35 14V16ZM6 30C6 26.4407 8.91138 22.9491 14.234 20.2878C19.4968 17.6564 26.8373 16 35 16V14C26.5941 14 18.9346 15.7014 13.3396 18.499C7.80435 21.2666 4 25.275 4 30H6ZM6.31214 32.025C6.10569 31.3607 6 30.6852 6 30H4C4 30.8941 4.13838 31.7694 4.40224 32.6185L6.31214 32.025ZM4.36882 32.4738L14.0116 95.1521L15.9884 94.8479L6.34556 32.1697L4.36882 32.4738ZM14 95C14 98.3443 16.6851 101.103 20.4107 102.965C24.1961 104.858 29.3556 106 35 106V104C29.5987 104 24.7582 102.903 21.3051 101.177C17.7921 99.4202 16 97.1786 16 95H14ZM35 106C40.6444 106 45.8039 104.858 49.5893 102.965C53.3149 101.103 56 98.3443 56 95H54C54 97.1786 52.2079 99.4202 48.6949 101.177C45.2418 102.903 40.4013 104 35 104V106ZM55.9884 95.1521L65.6312 32.4737L63.6545 32.1696L54.0116 94.8479L55.9884 95.1521Z" fill="white" mask="url(#path-1-inside-1)"/>
      <path d="M54.5 95C54.5 97.47 52.4847 99.8408 48.9185 101.624C45.3823 103.392 40.4621 104.5 35 104.5C29.5379 104.5 24.6177 103.392 21.0815 101.624C17.5153 99.8408 15.5 97.47 15.5 95C15.5 92.53 17.5153 90.1592 21.0815 88.3761C24.6177 86.608 29.5379 85.5 35 85.5C40.4621 85.5 45.3823 86.608 48.9185 88.3761C52.4847 90.1592 54.5 92.53 54.5 95Z" stroke="white"/>
      <!-- 음료 아랫면 -->
      <ellipse cx="35" cy="95" rx="18" ry="8" fill="#FFDAE9" />
      <!-- 음료 옆면 -->
      <!-- <path d="M7 30H63L53 95H17L7 30Z" fill="#FFC5C5"/> -->
      <path :d="d" fill="url(#latte)"/>
      <!-- 음료 윗면 -->
      <!-- <ellipse cx="35" cy="30" rx="28" ry="13" fill="#FFC5C5"/> -->
      <ellipse cx="35" :cy="95-(95-30)*this.achievement" :rx="18+(28-18)*achievement" :ry="8+(13-8)*achievement" fill="url(#strawberry1)"/>
      <mask id="path-7-inside-2" fill="white">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M62.7164 18.5195C64.224 22.1593 65 26.0603 65 30C65 38.2843 51.5685 45 35 45C18.4315 45 5 38.2843 5 30C5 26.0603 5.77597 22.1593 7.28361 18.5195C8.79125 14.8797 11.001 11.5726 13.7868 8.7868C16.5726 6.00104 19.8797 3.79126 23.5195 2.28361C27.1593 0.775973 31.0603 0 35 0C38.9397 0 42.8407 0.775973 46.4805 2.28361C50.1203 3.79125 53.4274 6.00104 56.2132 8.7868C58.999 11.5726 61.2087 14.8797 62.7164 18.5195Z"/>
      </mask>
      <path d="M62.7164 18.5195L61.7925 18.9022L61.7925 18.9022L62.7164 18.5195ZM7.28361 18.5195L6.35973 18.1368L6.35973 18.1368L7.28361 18.5195ZM13.7868 8.7868L14.4939 9.4939L14.4939 9.4939L13.7868 8.7868ZM23.5195 2.28361L23.1368 1.35974L23.1368 1.35974L23.5195 2.28361ZM46.4805 2.28361L46.8632 1.35973L46.8632 1.35973L46.4805 2.28361ZM56.2132 8.7868L55.5061 9.4939L55.5061 9.4939L56.2132 8.7868ZM66 30C66 25.929 65.1982 21.8979 63.6403 18.1368L61.7925 18.9022C63.2499 22.4206 64 26.1917 64 30H66ZM64 30C64 33.5593 61.0886 37.0509 55.766 39.7122C50.5032 42.3436 43.1627 44 35 44V46C43.4059 46 51.0654 44.2986 56.6604 41.501C62.1957 38.7334 66 34.725 66 30H64ZM35 44C26.8373 44 19.4968 42.3436 14.234 39.7122C8.91138 37.0509 6 33.5593 6 30H4C4 34.725 7.80435 38.7334 13.3396 41.501C18.9346 44.2986 26.5941 46 35 46V44ZM6.35973 18.1368C4.80184 21.8979 4 25.929 4 30H6C6 26.1917 6.75011 22.4206 8.20749 18.9022L6.35973 18.1368ZM13.0797 8.07969C10.2011 10.9583 7.91763 14.3757 6.35973 18.1368L8.20749 18.9022C9.66488 15.3837 11.801 12.1868 14.4939 9.4939L13.0797 8.07969ZM23.1368 1.35974C19.3757 2.91763 15.9583 5.20107 13.0797 8.07969L14.4939 9.4939C17.1868 6.80101 20.3837 4.66488 23.9022 3.20749L23.1368 1.35974ZM35 -1C30.929 -1 26.8979 -0.198161 23.1368 1.35974L23.9022 3.20749C27.4206 1.75011 31.1917 1 35 1V-1ZM46.8632 1.35973C43.1021 -0.198162 39.071 -1 35 -1V1C38.8083 1 42.5794 1.75011 46.0978 3.20749L46.8632 1.35973ZM56.9203 8.07969C54.0417 5.20107 50.6243 2.91763 46.8632 1.35973L46.0978 3.20749C49.6163 4.66488 52.8132 6.801 55.5061 9.4939L56.9203 8.07969ZM63.6403 18.1368C62.0824 14.3757 59.7989 10.9583 56.9203 8.07969L55.5061 9.4939C58.199 12.1868 60.3351 15.3837 61.7925 18.9022L63.6403 18.1368Z" fill="white" mask="url(#path-7-inside-2)"/>
      <ellipse cx="35" cy="30" rx="33" ry="18" stroke="white"/>
      <path d="M1 34L2 30C2 38 12.9993 48 35 48C56.5 48 68 38.206 68 30L69 34C69 42 57.5001 52 35 52C12.5 52 1 42 1 34Z" stroke="white" stroke-linejoin="round"/>
      <!-- percentage -->
      <text x="0" y="10" fill="white" font-size="0.5em">{{ achievement * 100 }}%</text>
    </svg>
  </section>
</template>

<script>
export default {
  name: 'GaugeBar',
  props: {
    achievement: Number,
  },
  data: function() {
    return {
      d: `M${17-(17-7)*this.achievement} ${95-(95-30)*this.achievement}H${53+(63-53)*this.achievement}L53 95H17L${17-(17-7)*this.achievement} ${95-(95-30)*this.achievement}Z`,
    }
  }
}
</script>

<style scoped>
#gaugeBar {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
}
svg {
  height: 100%;
}
</style>
